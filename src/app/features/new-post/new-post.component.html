<div class="new-post-container">
	<h1>Ajouter un post</h1>

	<form [formGroup]="newPostForm" (ngSubmit)="onSubmit()">
		<mat-form-field appearance="fill">
			<mat-label>Titre</mat-label>
			<input matInput formControlName="title" required/>
			<mat-error *ngIf="newPostForm.get('title').invalid">
				<span *ngIf="newPostForm.get('title').errors.required">Le titre est obligatoire.</span>
				<span *ngIf="newPostForm.get('title').errors.minlength">Le titre doit contenir au moins 3 caractères.</span>
				<span *ngIf="newPostForm.get('title').errors.maxlength">Le titre ne doit pas dépasser 60 caractères.</span>
			</mat-error>
		</mat-form-field>
		<br>
		<mat-form-field appearance="fill">
			<mat-label>Contenu</mat-label>
			<textarea matInput formControlName="content" required></textarea>
			<mat-error *ngIf="newPostForm.get('content').invalid">
				<span *ngIf="newPostForm.get('content').errors.required">Le contenu est obligatoire.</span>
				<span *ngIf="newPostForm.get('content').errors.minlength">Le contenu doit contenir au moins 30 caractères.</span>
				<span *ngIf="newPostForm.get('content').errors.maxlength">Le contenu ne doit pas dépasser 600 caractères.</span>
			</mat-error>
		</mat-form-field>

		<button mat-raised-button color="primary" class="mt-3 w-100" [disabled]="newPostForm.invalid" type="submit">
			<mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
			<span *ngIf="!loading">Publier</span>
		</button>
	</form>

	<div class="alert alert-success mt-3 w-100" *ngIf="success">
		<strong>Félicitations !</strong> Votre article a été publié avec l'ID {{ postId }}
	</div>
</div>
